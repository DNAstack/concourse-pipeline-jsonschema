{"$schema":"http://json-schema.org/draft-04/schema#","$ref":"#/definitions/Config","definitions":{"BuildLogRetention":{"properties":{"builds":{"type":"integer"},"minimum_succeeded_builds":{"type":"integer"},"days":{"type":"integer"}},"additionalProperties":false,"type":"object"},"Config":{"properties":{"groups":{"items":{"$schema":"http://json-schema.org/draft-04/schema#","$ref":"#/definitions/GroupConfig"},"type":"array"},"var_sources":{"items":{"$schema":"http://json-schema.org/draft-04/schema#","$ref":"#/definitions/VarSourceConfig"},"type":"array"},"resources":{"items":{"$schema":"http://json-schema.org/draft-04/schema#","$ref":"#/definitions/ResourceConfig"},"type":"array"},"resource_types":{"items":{"$schema":"http://json-schema.org/draft-04/schema#","$ref":"#/definitions/ResourceType"},"type":"array"},"jobs":{"items":{"$schema":"http://json-schema.org/draft-04/schema#","$ref":"#/definitions/JobConfig"},"type":"array"}},"additionalProperties":false,"type":"object"},"ContainerLimits":{"properties":{"cpu":{"type":"integer"},"memory":{"type":"integer"}},"additionalProperties":false,"type":"object"},"GroupConfig":{"required":["name"],"properties":{"name":{"type":"string"},"jobs":{"items":{"type":"string"},"type":"array"},"resources":{"items":{"type":"string"},"type":"array"}},"additionalProperties":false,"type":"object"},"ImageResource":{"required":["type","source"],"properties":{"type":{"type":"string"},"source":{"patternProperties":{".*":{"additionalProperties":true}},"type":"object"},"params":{"patternProperties":{".*":{"additionalProperties":true}},"type":"object"},"version":{"patternProperties":{".*":{"type":"string"}},"type":"object"}},"additionalProperties":false,"type":"object"},"InParallelConfig":{"properties":{"steps":{"items":{"$ref":"#/definitions/PlanConfig"},"type":"array"},"limit":{"type":"integer"},"fail_fast":{"type":"boolean"}},"additionalProperties":false,"type":"object"},"InputsConfig":{"required":["All","Detect","Specified"],"properties":{"All":{"type":"boolean"},"Detect":{"type":"boolean"},"Specified":{"items":{"type":"string"},"type":"array"}},"additionalProperties":false,"type":"object"},"JobConfig":{"required":["name","plan"],"properties":{"name":{"type":"string"},"old_name":{"type":"string"},"public":{"type":"boolean"},"disable_manual_trigger":{"type":"boolean"},"serial":{"type":"boolean"},"interruptible":{"type":"boolean"},"serial_groups":{"items":{"type":"string"},"type":"array"},"max_in_flight":{"type":"integer"},"build_logs_to_retain":{"type":"integer"},"build_log_retention":{"$schema":"http://json-schema.org/draft-04/schema#","$ref":"#/definitions/BuildLogRetention"},"on_abort":{"$schema":"http://json-schema.org/draft-04/schema#","$ref":"#/definitions/PlanConfig"},"on_error":{"$ref":"#/definitions/PlanConfig"},"on_failure":{"$ref":"#/definitions/PlanConfig"},"ensure":{"$ref":"#/definitions/PlanConfig"},"on_success":{"$ref":"#/definitions/PlanConfig"},"plan":{"items":{"$ref":"#/definitions/PlanConfig"},"type":"array"}},"additionalProperties":false,"type":"object"},"PlanConfig":{"properties":{"name":{"type":"string"},"do":{"items":{"$ref":"#/definitions/PlanConfig"},"type":"array"},"aggregate":{"items":{"$ref":"#/definitions/PlanConfig"},"type":"array"},"in_parallel":{"$schema":"http://json-schema.org/draft-04/schema#","$ref":"#/definitions/InParallelConfig"},"get":{"type":"string"},"passed":{"items":{"type":"string"},"type":"array"},"trigger":{"type":"boolean"},"put":{"type":"string"},"resource":{"type":"string"},"inputs":{"$schema":"http://json-schema.org/draft-04/schema#","$ref":"#/definitions/InputsConfig"},"task":{"type":"string"},"privileged":{"type":"boolean"},"config":{"$schema":"http://json-schema.org/draft-04/schema#","$ref":"#/definitions/TaskConfig"},"set_pipeline":{"type":"string"},"var_files":{"items":{"type":"string"},"type":"array"},"file":{"type":"string"},"vars":{"patternProperties":{".*":{"additionalProperties":true}},"type":"object"},"params":{"patternProperties":{".*":{"additionalProperties":true}},"type":"object"},"input_mapping":{"patternProperties":{".*":{"type":"string"}},"type":"object"},"output_mapping":{"patternProperties":{".*":{"type":"string"}},"type":"object"},"image":{"type":"string"},"get_params":{"patternProperties":{".*":{"additionalProperties":true}},"type":"object"},"tags":{"items":{"type":"string"},"type":"array"},"on_abort":{"$ref":"#/definitions/PlanConfig"},"on_error":{"$ref":"#/definitions/PlanConfig"},"on_failure":{"$ref":"#/definitions/PlanConfig"},"ensure":{"$ref":"#/definitions/PlanConfig"},"on_success":{"$ref":"#/definitions/PlanConfig"},"try":{"$ref":"#/definitions/PlanConfig"},"timeout":{"type":"string"},"attempts":{"type":"integer"},"version":{"$schema":"http://json-schema.org/draft-04/schema#","$ref":"#/definitions/VersionConfig"},"load_var":{"type":"string"},"format":{"type":"string"},"reveal":{"type":"boolean"}},"additionalProperties":false,"type":"object"},"ResourceConfig":{"required":["name","type","source"],"properties":{"name":{"type":"string"},"public":{"type":"boolean"},"webhook_token":{"type":"string"},"type":{"type":"string"},"source":{"patternProperties":{".*":{"additionalProperties":true}},"type":"object"},"check_every":{"type":"string"},"check_timeout":{"type":"string"},"tags":{"items":{"type":"string"},"type":"array"},"version":{"patternProperties":{".*":{"type":"string"}},"type":"object"},"icon":{"type":"string"}},"additionalProperties":false,"type":"object"},"ResourceType":{"required":["name","type","source"],"properties":{"name":{"type":"string"},"type":{"type":"string"},"source":{"patternProperties":{".*":{"additionalProperties":true}},"type":"object"},"privileged":{"type":"boolean"},"check_every":{"type":"string"},"tags":{"items":{"type":"string"},"type":"array"},"params":{"patternProperties":{".*":{"additionalProperties":true}},"type":"object"},"check_setup_error":{"type":"string"},"check_error":{"type":"string"},"unique_version_history":{"type":"boolean"}},"additionalProperties":false,"type":"object"},"TaskCacheConfig":{"properties":{"path":{"type":"string"}},"additionalProperties":false,"type":"object"},"TaskConfig":{"properties":{"platform":{"type":"string"},"rootfs_uri":{"type":"string"},"image_resource":{"$schema":"http://json-schema.org/draft-04/schema#","$ref":"#/definitions/ImageResource"},"container_limits":{"$schema":"http://json-schema.org/draft-04/schema#","$ref":"#/definitions/ContainerLimits"},"params":{"patternProperties":{".*":{"type":"string"}},"type":"object"},"run":{"$schema":"http://json-schema.org/draft-04/schema#","$ref":"#/definitions/TaskRunConfig"},"inputs":{"items":{"$schema":"http://json-schema.org/draft-04/schema#","$ref":"#/definitions/TaskInputConfig"},"type":"array"},"outputs":{"items":{"$schema":"http://json-schema.org/draft-04/schema#","$ref":"#/definitions/TaskOutputConfig"},"type":"array"},"caches":{"items":{"$schema":"http://json-schema.org/draft-04/schema#","$ref":"#/definitions/TaskCacheConfig"},"type":"array"}},"additionalProperties":false,"type":"object"},"TaskInputConfig":{"required":["name"],"properties":{"name":{"type":"string"},"path":{"type":"string"},"optional":{"type":"boolean"}},"additionalProperties":false,"type":"object"},"TaskOutputConfig":{"required":["name"],"properties":{"name":{"type":"string"},"path":{"type":"string"}},"additionalProperties":false,"type":"object"},"TaskRunConfig":{"required":["path"],"properties":{"path":{"type":"string"},"args":{"items":{"type":"string"},"type":"array"},"dir":{"type":"string"},"user":{"type":"string"}},"additionalProperties":false,"type":"object"},"VarSourceConfig":{"required":["name","type","config"],"properties":{"name":{"type":"string"},"type":{"type":"string"},"config":{"additionalProperties":true}},"additionalProperties":false,"type":"object"},"VersionConfig":{"required":["Every","Latest","Pinned"],"properties":{"Every":{"type":"boolean"},"Latest":{"type":"boolean"},"Pinned":{"patternProperties":{".*":{"type":"string"}},"type":"object"}},"additionalProperties":false,"type":"object"}}}
